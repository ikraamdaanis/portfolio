---
import { Image } from "astro:assets";
import SimpleIcon from "components/icons/simple-icon.astro";
import Zustand from "components/icons/zustand.astro";
import type { Project } from "data/projects-data";

interface Props {
  project: Project;
  isFirst?: boolean;
}

const { project, isFirst = false } = Astro.props;
const {
  title,
  description1,
  description2,
  list1,
  list2,
  repo,
  website,
  image1
} = project;
---

<article>
  <h3 class="text-xl font-medium">{title}</h3>
  <div class="relative mt-2 mb-4 aspect-[16/10] overflow-hidden rounded-[2px]">
    <div class="absolute h-full w-full animate-pulse bg-neutral-200"></div>
    <Image
      src={image1}
      alt={`${title} screenshot 1`}
      width={1280}
      height={800}
      widths={[320, 640, 960, 1280]}
      sizes="(max-width: 640px) 100vw, 640px"
      class="relative z-10 h-full w-full object-cover"
      loading={isFirst ? "eager" : "lazy"}
      fetchpriority={isFirst ? "high" : undefined}
    />
  </div>
  <p class="text-text-size mb-3">{description1}</p>
  <p class="text-text-size mb-3">{description2}</p>
  <ul class="mb-3 flex flex-wrap gap-2">
    {
      [...list1, ...list2].map(tech => (
        <li class="flex items-center gap-1.5 rounded-md bg-neutral-100 px-2 py-1 text-sm text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300">
          {tech.icon && (
            <span class="flex items-center justify-center" aria-hidden="true">
              {tech.icon === "zustand" ? (
                <Zustand class="size-[15px] grayscale" />
              ) : (
                <SimpleIcon icon={tech.icon} />
              )}
            </span>
          )}
          {tech.name}
        </li>
      ))
    }
  </ul>
  <div class="flex gap-4 text-sm">
    <a
      href={repo}
      rel="noreferrer"
      target="_blank"
      aria-label={`View ${title} source code on GitHub`}
      class="text-neutral-700 underline hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-neutral-100"
    >
      GitHub
    </a>
    {
      website && (
        <a
          href={website}
          rel="noreferrer"
          target="_blank"
          aria-label={`View ${title} live demo`}
          class="text-neutral-700 underline hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-neutral-100"
        >
          Live Demo
        </a>
      )
    }
  </div>
</article>
